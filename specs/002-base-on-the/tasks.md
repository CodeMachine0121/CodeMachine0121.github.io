# 任務清單：重新設計系列頁面

**輸入**：`/specs/002-base-on-the/` 內的設計文件  
**前置條件**：已完成 plan.md、spec.md、research.md、data-model.md、contracts/

> 提醒：所有任務描述必須使用繁體中文撰寫，且遵守《CodeMachine0121 技術分享部落格憲章》。

**測試**：此功能無明確測試要求，保持精簡實作。  
**組織方式**：任務依使用者故事分組，確保每個故事可獨立實作與驗證。

## 格式說明：`[ID] [P?] [故事] 任務描述`

- **[P]**：可平行執行（不會修改相同檔案且無依賴）
- **[故事]**：對應的使用者故事（例如 US1、US2、US3）
- 任務描述需包含具體檔案路徑

## 路徑慣例

- 單一前端專案：`src/`、`content/`、`public/` 與既有 Astro 結構
- 重用既有組件：`src/components/sections/blog/`
- 工具函式：`src/utils/`

## Phase 1：環境設定（共用基礎）

**目的**：建立必要工具函式與型別定義

- [x] T001 [P] 建立 URL slug 轉換工具於 `src/utils/slugify.ts`
- [x] T002 [P] 建立系列資料聚合工具於 `src/utils/series.ts`
- [x] T003 [P] 複製型別定義至 `src/types/series.ts`（基於 contracts/series-interfaces.ts）

---

## Phase 2：基礎要件（阻擋項）

**目的**：完成所有使用者故事前必備的基礎能力  
**⚠️ 注意**：此階段未完成前不得開始任何故事任務

- [x] T004 驗證既有 BlogList 與 BlogItem 組件相容性於 `src/components/sections/blog/`
- [x] T005 [P] 建立分頁工具函式於 `src/utils/pagination.ts`
- [x] T006 驗證建置流程（`npm run build` 與 `npm run check`）成功

**檢查點**：基礎工具就緒，可進入故事開發。

---

## Phase 3：使用者故事 1－系列文章卡片式瀏覽（優先度：P1）🎯 MVP

**目標**：重新設計系列概覽頁，移除展開功能，改為卡片導覽  
**獨立測試方式**：訪問 `/series` 頁面，驗證系列卡片顯示正確且可點擊導向系列頁面

### 實作任務

- [x] T007 [US1] 重寫系列概覽頁面於 `src/pages/series.astro`（移除展開邏輯，改為卡片設計）
- [x] T008 [P] [US1] 更新系列卡片樣式，確保響應式設計於 `src/pages/series.astro`
- [x] T009 [US1] 整合 URL slug 生成邏輯，確保卡片連結正確指向 `/series/[slug]`
- [x] T010 [US1] 驗證系列概覽頁功能：卡片顯示、數量統計、點擊導覽

**檢查點**：故事 1 功能可獨立運作，系列概覽頁完全重新設計完成。

---

## Phase 4：使用者故事 2－系列內文章清單瀏覽（優先度：P2）

**目標**：建立動態系列頁面，重用 BlogList 組件顯示系列文章  
**獨立測試方式**：訪問 `/series/[any-slug]` 驗證文章清單正確顯示，符合部落格清單格式

### 實作任務

- [x] T011 [US2] 建立動態路由頁面於 `src/pages/series/[slug].astro`
- [x] T012 [P] [US2] 實作 getStaticPaths 函式，生成所有系列的靜態路徑
- [x] T013 [US2] 整合 BlogList 組件，傳遞系列文章資料
- [x] T014 [P] [US2] 加入分頁邏輯處理大型系列（每頁 12 篇文章）
- [x] T015 [US2] 處理邊界情境：空系列顯示、無效 slug 處理、分頁範圍驗證
- [x] T016 [US2] 驗證系列專屬頁面：文章清單、點擊導覽、分頁功能

**檢查點**：故事 1 與故事 2 均可獨立驗證，系列頁面功能完整。

---

## Phase 5：使用者故事 3－系列頁面導覽與返回（優先度：P3）

**目標**：加入麵包屑導覽，提供清楚的頁面結構與返回功能  
**獨立測試方式**：驗證麵包屑顯示正確，返回連結功能正常

### 實作任務

- [x] T017 [P] [US3] 建立麵包屑組件或邏輯於系列頁面
- [x] T018 [US3] 實作「系列文章 > [系列名稱]」導覽格式於 `src/pages/series/[slug].astro`
- [x] T019 [P] [US3] 加入頁面標題與 meta 標籤優化
- [x] T020 [US3] 整合導覽功能並驗證返回連結
- [x] T021 [US3] 驗證完整導覽流程：首頁 → 系列概覽 → 系列頁面 → 返回

**檢查點**：三個使用者故事皆可獨立交付，導覽體驗完整。

---

## Phase 6：強化與跨故事事項

**目的**：針對多個故事的共同改善，但不得破壞既有驗證路徑。

- [x] T022 [P] 更新主導覽連結，確保指向新的系列頁面結構
- [x] T023 [P] 優化 SEO：加入 canonical URLs、meta descriptions、Open Graph 標籤
- [x] T024 [P] 驗證效能目標：頁面載入 < 2秒，分頁載入 < 1秒
- [x] T025 [P] 更新 quickstart.md 手動驗證流程
- [x] T026 程式碼整理：移除舊的展開/收合相關程式碼
- [x] T027 [P] 驗證建置流程與型別檢查完整通過
- [x] T028 建立完整功能測試檢查清單，驗證所有使用者故事

---

## 相依關係與執行順序

### 階段相依

- **Phase 1**：可立即開始
- **Phase 2**：依賴 Phase 1，完成前禁止進入任何故事
- **Phase 3+**：依賴 Phase 2 完成，之後可平行開發
- **Phase 6**：所有目標故事完成後再執行

### 故事相依

- **故事 1（P1）**：完成 Phase 2 後即可進行，應獨立驗證
- **故事 2（P2）**：依賴故事 1 的路由設計，需確保卡片連結正確
- **故事 3（P3）**：依賴故事 2 的頁面結構，加入導覽功能

### 故事內部順序

- 工具函式 → 頁面結構 → 組件整合 → 功能驗證
- 核心功能 → 邊界處理 → 使用者體驗優化
- 驗收測試須在任務完成後立即進行

### 平行機會

**Phase 1 平行執行**：
- T001（slugify.ts）、T002（series.ts）、T003（types.ts）可同時進行

**Phase 2 平行執行**：
- T005（pagination.ts）可與 T004（組件驗證）平行

**跨故事平行執行**：
- 故事 2 與故事 3 的某些 [P] 標記任務可平行進行
- Phase 6 中所有 [P] 標記的任務可平行執行

---

## 實作策略

### MVP 優先（僅完成故事 1）

1. 完成 Phase 1：環境設定（工具函式）
2. 完成 Phase 2：基礎要件（組件驗證）  
3. 完成 Phase 3：故事 1（系列概覽重新設計）
4. **停止並驗證**：確認故事 1 可獨立交付  
5. 如可，立即部署或分享，收集回饋

### 迭代交付

1. 完成 Phase 1 + Phase 2 → 打好根基  
2. 加入故事 1 → 驗證 → 分享（系列概覽卡片化）
3. 加入故事 2 → 驗證 → 分享（動態系列頁面）
4. 加入故事 3 → 驗證 → 分享（導覽優化）

### 平行團隊策略

1. 團隊先協力完成 Phase 1 與 Phase 2  
2. Phase 2 完成後：
   - 成員 A：負責故事 1（系列概覽頁重新設計）
   - 成員 B：負責故事 2（動態系列頁面）
   - 成員 C：負責故事 3（導覽與返回功能）  
3. 故事皆須維持可獨立驗證與部署

---

## 備註

- [P] 任務需確認無共享檔案衝突，特別注意 `src/pages/series.astro` 的修改順序。  
- 每項任務完成後更新 tasks.md 為 `[X]`，保持進度透明。  
- 重用既有組件是關鍵原則，避免重複實作 BlogList 功能。
- URL slug 處理中文字元時需特別注意編碼正確性。
- 分頁功能實作時需考慮靜態生成限制與效能影響。