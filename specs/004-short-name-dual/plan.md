# 實作計畫：雙模式文章導覽

**分支**：`004-short-name-dual` | **日期**：2025-10-19 | **規格**：[spec.md](./spec.md)
**輸入**：來源於 `/specs/004-short-name-dual/spec.md` 的功能規格與研究

> 提醒：所有段落必須使用繁體中文撰寫，並遵守《CodeMachine0121 技術分享部落格憲章》之核心原則。

## 摘要

此計畫旨在為部落格文章頁面實作一個雙模式的「上一篇」/「下一篇」導覽功能。此功能會根據文章類型（單篇文章或系列文章）採用不同的排序邏輯。對於單篇文章，導覽將依據發表日期排序（新→舊）；對於系列文章，則依據其在系列中的順序 (`seriesIndex`) 進行導覽。目標是為兩種內容類型的讀者提供流暢、直觀的閱讀體驗。

## 技術背景

**語言／版本**：TypeScript 5.x、Astro 4.x
**主要相依**：Tailwind CSS
**資料儲存**：Markdown (.md) 檔案
**測試工具**：Astro check、ESLint
**目標平臺**：靜態網站託管 (Netlify)
**專案型態**：單一前端
**效能目標**：頁面載入時間維持在 2 秒內
**限制條件**：建置需於 5 分鐘內完成
**規模／範圍**：應用於所有文章頁面

## 憲章檢查

*閘門：在 Phase 0 研究前必須確認以下條目均符合，Phase 1 設計完成後再次核對。*

- **極簡優先（KISS）**：是，此設計將重用現有的導覽元件，僅擴充其內部邏輯以支援雙模式。
- **Astro + TypeScript 標準堆疊**：是，完全在現有技術堆疊內實作。
- **提交前強制品質檢查**：是，現有的品質檢查流程將涵蓋新程式碼。
- **建置門檻**：是，`npm run build` 將作為驗收標準之一。
- **文件全面採用繁體中文**：是，所有產出文件皆為繁體中文。
- **知識分享須可驗證**：是，此功能的 UI 變更是可直接驗證的。

## 專案結構

### 文件（此功能）

```
specs/004-short-name-dual/
├── plan.md              # 本文件
├── research.md          # Phase 0 產出
├── data-model.md        # Phase 1 產出
├── quickstart.md        # Phase 1 產出
├── contracts/           # (不適用)
└── tasks.md             # Phase 2 產出
```

### 原始碼（儲存庫根目錄）

此功能將修改以下檔案：

```
src/
├── components/
│   └── sections/
│       └── blog/
│           └── PostNavigation.astro  # (修改) 增加模式判斷邏輯
└── utils/
    └── series.ts                 # (修改) 擴充函式以支援兩種排序模式
```

**結構決策**：我們將在現有的 `PostNavigation.astro` 元件和 `series.ts` 工具函式中進行擴充，而不是建立新檔案。這種方法符合極簡原則，並能最大化地重用現有程式碼。`series.ts` 將包含一個新的或修改過的函式，用來根據文章是否屬於一個系列來決定導覽邏輯。

## 複雜度追蹤

*僅在無法完全符合憲章原則時填寫，並提供具體理由。*

| 違反項目 | 為何必要 | 捨棄較簡單方案的原因 |
|----------|----------|----------------------|
| N/A      | N/A      | N/A                  |