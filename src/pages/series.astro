---
import Layout from "../layouts/Layout.astro";
import { generateSeriesList } from "../utils/series";

// 使用新的系列聚合工具
const seriesList = await generateSeriesList();

// 開發時輸出系列資訊
console.log('[series] total series =', seriesList.length);
for (const series of seriesList) {
  console.log(` - ${series.name}: ${series.count} 篇`);
}
---

<Layout title="系列文章">
  <section class="py-8">
    <h1 class="text-3xl font-bold mb-6">系列文章</h1>

    {seriesList.length === 0 && (
      <p class="text-offset">目前沒有任何系列文章。</p>
    )}

    <div class="grid gap-4 max-w-4xl">
      {seriesList.map((series) => (
        <a 
          href={`/series/${series.slug}`}
          class="block p-6 border border-default rounded-lg bg-background hover:shadow-md transition-all duration-200 group"
        >
          <div class="flex items-center justify-between">
            <h2 class="text-xl font-semibold text-text group-hover:text-primary transition-colors">
              {series.name}
            </h2>
            <span class="text-sm text-offset bg-background-offset px-3 py-1 rounded-full">
              {series.count} 篇
            </span>
          </div>
          <div class="mt-2 text-sm text-offset">
            <span>系列文章</span>
            <span class="mx-2">•</span>
            <span>點擊查看全部文章</span>
          </div>
        </a>
      ))}
    </div>
  </section>
</Layout>

<style>
  .border-default { border-color: rgba(125, 125, 125, 0.2); }
  .bg-background { background: transparent; }
  .bg-background-offset { background: rgba(125, 125, 125, 0.1); }
  .text-text { color: inherit; }
  .text-offset { opacity: 0.75; }
  .text-primary { color: var(--primary-color, #0066cc); }
  
  /* 響應式設計 */
  @media (max-width: 768px) {
    .grid {
      gap: 0.75rem;
    }
    
    a {
      padding: 1rem;
    }
    
    h2 {
      font-size: 1.125rem;
    }
  }
</style>
