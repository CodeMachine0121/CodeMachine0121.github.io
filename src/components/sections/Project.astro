---
const { imageUrl, title, type, link } = Astro.props;
const finalImageUrl = imageUrl ===  ""
    ? "https://images.unsplash.com/photo-1709547228697-fa1f424a3f39?q=80&w=1470&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D"
    : imageUrl;
---

<a
    href={link}
    target="_blank"
    rel="noopener noreferrer"
    class="block group h-full cursor-pointer"
>
    <article class="flex flex-col h-full overflow-hidden rounded-2xl bg-offset border border-default shadow-md hover:shadow-2xl transition-all duration-300 hover:-translate-y-2">
        <!-- Image Container with improved overlay -->
        <div class="relative h-52 overflow-hidden shrink-0 bg-background-offset">
            <!-- Gradient overlay for better text contrast -->
            <div class="absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-black/20 z-10"></div>

            <!-- Background Image -->
            <div
                class="absolute inset-0 bg-cover bg-center transition-transform duration-500 ease-out group-hover:scale-110"
                style={`background-image: url('${finalImageUrl}');`}
            >
            </div>

            <!-- Hover overlay effect -->
            <div class="absolute inset-0 bg-primary/0 group-hover:bg-primary/10 transition-colors duration-300 z-20"></div>

            <!-- Type Badge overlaid on image -->
            <div class="absolute top-4 left-4 z-30">
                <span class="inline-flex items-center px-3 py-1.5 text-xs font-semibold tracking-wider text-white bg-primary/90 backdrop-blur-sm rounded-full shadow-lg">
                    {type.en}
                </span>
            </div>
        </div>

        <!-- Content Container -->
        <div class="flex flex-col flex-grow p-6 bg-background-offset group-hover:bg-background transition-colors duration-200">
            <!-- Title with better typography -->
            <h3 class="font-heading text-lg sm:text-xl font-semibold text-default group-hover:text-primary transition-colors duration-200 line-clamp-2 mb-auto leading-snug">
                {title.en}
            </h3>

            <!-- View Project Link with better spacing -->
            <div class="mt-5 pt-4 border-t border-border flex items-center justify-between">
                <span class="text-sm font-medium text-offset group-hover:text-primary transition-colors duration-200">
                    View Project
                </span>
                <div class="flex items-center justify-center w-8 h-8 rounded-full bg-primary/10 group-hover:bg-primary group-hover:text-white text-primary transition-all duration-200">
                    <svg class="w-4 h-4 transition-transform group-hover:translate-x-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                    </svg>
                </div>
            </div>
        </div>
    </article>
</a>

<style>
    /* Ensure smooth animations */
    article {
        will-change: transform;
    }

    @media (prefers-reduced-motion: reduce) {
        article,
        article * {
            transition-duration: 0.01ms !important;
            animation-duration: 0.01ms !important;
        }
    }
</style>
